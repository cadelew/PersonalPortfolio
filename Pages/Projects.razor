@page "/projects"
@using PokerPortfolio.Models
@using PokerPortfolio.Services
@inject NavigationManager NavigationManager
@inject GameStateService GameState

<div class="projects-overlay">
    <div class="projects-container">
        <div class="projects-cards">
            @{
                var projects = GetProjects();
            }
            @for (var i = 0; i < projects.Count; i++)
            {
                var project = projects[i];
                var locked = i >= GameState.CardsDealt;
                <div class="project-card">
                    <div class="card-corner top-left">@project.Rank @project.Suit</div>
                    <div class="card-corner bottom-right">@project.Rank @project.Suit</div>

                    <div class="card-content">
                        <div class="project-icon">@project.Icon</div>
                        <h3 class="project-title">@project.Title</h3>
                        <p class="project-description">@project.Description</p>

                        <div class="tech-stack">
                            <div class="tech-label">TECH STACK</div>
                            <div class="tech-bar">@project.TechStack</div>
                        </div>

                        <a href="@project.GitHubUrl" target="_blank" class="github-link">
                            VIEW ON GITHUB →
                        </a>
                    </div>

                    @if (locked)
                    {
                        <div class="locked-overlay">
                            <div class="locked-message">
                                Locked — deal more cards to reveal
                            </div>
                        </div>
                    }
                </div>
            }
        </div>

        @if (GameState.CardsDealt < 5)
        {
            <div style="margin-bottom:16px;color:#ffcc00;background:#2d1b0e;border:2px solid #ffcc00;padding:8px 12px;box-shadow:4px 4px 0 rgba(0,0,0,0.3);font-size:12px;">
                @("Reveal progress: " + GameState.CardsDealt + "/5 projects unlocked. Deal more cards!")
            </div>
        }

        <button class="pixel-button back-to-table-btn" @onclick="BackToTable" style="background-color:#ffcc00;color:#0f3d1a;border:3px solid #2d1b0e;padding:12px 24px;font-size:14px;cursor:pointer;">
            Back to Table
        </button>
    </div>
</div>

@code {
    private List<Project> GetProjects()
    {
        return new List<Project>
        {
            new Project
            {
                Title = "Crypto Market Making Engine",
                Description = "Market making engine implementing Avellaneda-Stoikov model with EWMA volatility calculator on real-life market data from Binance Websocket",
                TechStack = "C++ / Python / Postgres / FastAPI",
                GitHubUrl = "https://github.com/cadelew/Crypto-Market-Making-Engine",
                Rank = "Q",
                Suit = "♠"
            },
            new Project
            {
                Title = "CS @ SJDLS",
                Description = "Full-stack educational website for computer science students at SJDLS. Includes dynamic quiz generation, user checklists, and resources for students",
                TechStack = "Javascript / React / Node.js / Express / MongoDB",
                GitHubUrl = "https://github.com/cadelew/cs-at-sjdls",
                Rank = "J",
                Suit = "♣"
            },
            new Project
            {
                Title = "Coming Soon",
                Description = "More projects coming soon!",
                TechStack = "Coming Soon",
                GitHubUrl = "https://github.com/cadelew/",
                Rank = "10",
                Suit = "♥"
            },
            new Project
            {
                Title = "Coming Soon",
                Description = "More projects coming soon!",
                TechStack = "Coming Soon",
                GitHubUrl = "https://github.com/cadelew/",      
                Rank = "9",
                Suit = "♦"
            },
            new Project
            {
                Title = "Coming Soon",
                Description = "More projects coming soon!",
                TechStack = "Coming Soon",
                GitHubUrl = "https://github.com/cadelew/",      
                Rank = "8",
                Suit = "♦"
            }
        };
    }

    private void BackToTable()
    {
        NavigationManager.NavigateTo("/table");
    }
}